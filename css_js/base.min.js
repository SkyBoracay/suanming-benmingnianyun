"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}try{define("jquery",[],function(){return jQuery})}catch(e){console.warn(e)}requirejs.config({baseUrl:(_requireBaseUrl||"")+"common/js/",map:{"*":{css:(_requireBaseUrl||"")+"common/js/libs/require-css-0.1.10.min.js"}},paths:{jquery:"libs/jquery-3.4.1.min","ccwk-layerJS":"layer-3.1.0/layer","ccwk-layerCSS":"layer-3.1.0/theme/default/layer","ccwk-ruiDatepickerJS":"rui-datepicker-1.6.1/rui-datepicker.min","ccwk-ruiDatepickerCSS":"rui-datepicker-1.6.1/rui-datepicker.min","ccwk-echarts":"echarts-4.2.1/echarts.min","ccwk-echartsSimple":"echarts-4.2.1/echarts.simple.min","ccwk-echartsCommon":"echarts-4.2.1/echarts.common.min","ccwk-swiperJS":"swiper-4.5.0/swiper.min","ccwk-swiperCSS":"swiper-4.5.0/swiper.min","ccwk-clipboard":"libs/clipboard-2.0.4.min","ccwk-qrcode":"libs/qrcode.min","ccwk-picker":"picker/picker.min","ccwk-areaJS":"area.min"},shim:{"ccwk-picker":{deps:["css!picker/picker.min.css"]}}}),$(function(){function getQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=window.location.search.substring(1).match(t);return null!=n?decodeURIComponent(n[2]):null}$.ajaxSetup({error:function(e,t,n){require(["ccwk-layerJS","css!ccwk-layerCSS"],function(){layer.msg("Ajax请求出现错误：",{icon:2,time:2e3})})}});var common={};common.datepickerInput=function(){var e=$(".J_datepicker");e.length&&(e.focus(function(){this.blur()}),require(["ccwk-ruiDatepickerJS","css!ccwk-ruiDatepickerCSS"],function(){for(var t=0,n=e.length;t<n;t++){(new ruiDatepicker).init("#"+$(".J_datepicker").eq(t).attr("id"))}}))},common.protocolPop=function(){var e=$("#protocolPopbox");if(e.length){var t=e.find(".J_tabTitle").children("li"),n=e.find(".J_tabText").children("li"),a=!1,i=0;$(".J_protocolShowBtn").on("click",function(){a||$.ajax({url:"/about/agreement.html",success:function(e){1==e.code&&e.data&&(n.eq(0).html(e.data[0]),n.eq(1).html(e.data[1]),a=!0)}}),e.show(),i=$(document).scrollTop(),$("body").css({position:"fixed",top:-i})}),e.find(".J_close").on("click",function(){$("body").css({position:"static"}),$(document).scrollTop(i),e.hide()}),t.on("click",function(){$(this).addClass("active").siblings().removeClass("active"),n.eq($(this).index()).addClass("active").siblings().removeClass("active")})}},common.publicFormCheck=function(){var e=$(".J_formCheckbox");e.length&&e.on("click",function(){$(this).hasClass("active")?$(this).removeClass("active").find('input[name="privacy_protocol"]').prop("checked",!1):$(this).addClass("active").find('input[name="privacy_protocol"]').prop("checked",!0)})},common.formSubmit=function(){var ajaxForm=$("form.J_ajaxForm");ajaxForm.length&&require(["ccwk-layerJS","css!ccwk-layerCSS"],function(){var layerLoad,ajaxLock=!1;$(".J_ajaxSubmitBtn").on("click",function(e){e.preventDefault();var btn=$(this),form=btn.parents("form.J_ajaxForm"),formDataArr,ajaxUrl=btn.data("action")?btn.data("action"):form.attr("action"),ajaxType=form.attr("method")?form.attr("method"):"GET",inputPrivacyProtocol=form.find('input[name="privacy_protocol"]'),dataName=form.find('input[name="privacy_protocol"]').data("on");if(inputPrivacyProtocol.length&&!inputPrivacyProtocol.is(":checked")&&void 0===dataName)return layer.msg("您未同意个人隐私协议",{icon:5}),!1;if(ajaxLock)return!1;ajaxLock=!0;var callback=function(e,t){var n=e.msg,a="";n.msg&&(n=e.msg.msg,a=e.msg.field),e.code>0?layer.msg(n,{icon:1,time:2e3},function(){e.url?window.location.href=e.url:form.data("refresh")&&window.location.reload(),setTimeout(function(){form.find('input[name="username"]').val(""),form.find('input[type="text"]').val(""),form.find('input[name="birthday"]').val(""),form.find('input[name="girl_birthday"]').val("")},600)}):e.code<=0&&(layer.msg(n,{icon:5,time:2e3}),t.removeProp("disabled").removeClass("disabled"),""!=a&&$("#"+a).focus())};""!==btn.data("callback")&&void 0!=btn.data("callback")&&(callback=eval(btn.data("callback"))),formDataArr=form.serializeArray();for(var ajaxData={},f=0,fmax=formDataArr.length;f<fmax;f++)ajaxData[formDataArr[f].name]=formDataArr[f].value;try{ajaxData._fenxi={userAgent:navigator.userAgent,platform:navigator.platform,referrer:document.referrer,language:navigator.language,innerWidth:window.innerWidth,innerHeight:window.innerHeight}}catch(e){}$.ajax({url:ajaxUrl,type:ajaxType,data:ajaxData,dataType:"json",beforeSend:function(){btn.text();btn.prop("disabled",!0).addClass("disabled"),layerLoad=layer.load(3,{shade:!1})},success:function(e,t,n,a){if(e.code>0&&window.localStorage)for(var i=0,o=formDataArr.length;i<o;i++)try{localStorage.setItem(formDataArr[i].name,formDataArr[i].value)}catch(e){}btn.text();btn.removeClass("disabled").removeAttr("disabled").parent().find("span").remove(),layer.close(layerLoad),callback(e,btn),setTimeout(function(){ajaxLock=!1},2e3)}})})})},common.formAutoFill=function(){if($("form.J_ajaxForm").length)for(var e=$("form.J_ajaxForm").find("input"),t=0,n=e.length;t<n;t++){var a=e.eq(t),i=a.attr("name");if(""!=i&&window.localStorage&&localStorage.getItem(i))switch(!0){case/birthday/.test(i):if($("#"+i).val())break;$("#"+i).attr("data-date",localStorage.getItem(i));break;default:if("true"==a.attr("nolocal")||a.val())break;"text"==a.attr("type")&&a.val(localStorage.getItem(i))}}},common.urlFormAutoFill=function(){for(var e=$("form.J_ajaxForm"),t=e.length?e.find("input"):[],n=0,a=t.length;n<a;n++){var i=t.eq(n),o=i.attr("name");if(""!=o&&getQueryString(o))switch(!0){case/username/.test(o):case/girl_username/.test(o):case/xing/.test(o):case/birthday/.test(o):case/girl_birthday/.test(o):case/hour/.test(o):case/girl_hour/.test(o):case/phone/.test(o):i.prop("value",getQueryString(o));break;case/born/.test(o):var r=getQueryString(o);if(["1","0"].indexOf(r)<0)break;i.prop("value",getQueryString(o)),i.siblings("span[data-value]").removeClass("cur active"),i.siblings('span[data-value="'.concat(r,'"]')).addClass("cur active");break;case/gender/.test(o):var c=getQueryString(o);if(["1","0"].indexOf(c)<0)break;i.prop("value",getQueryString(o)),i.siblings("span[data-value]").removeClass("cur active"),i.siblings('span[data-value="'.concat(c,'"]')).addClass("cur active");break;case/datetext/.test(o):i.prop("value",getQueryString(o)).attr({"data-type":1==getQueryString("isnongli")?1:0,"data-date":getQueryString("birthday")?getQueryString("birthday"):"","data-hour":getQueryString("hour")?getQueryString("hour"):""});break;case/girl_datetext/.test(o):i.prop("value",getQueryString(o)).attr({"data-type":1==getQueryString("girl_isnongli")?1:0,"data-date":getQueryString("girl_birthday")?getQueryString("girl_birthday"):"","data-hour":getQueryString("girl_hour")?getQueryString("girl_hour"):""})}}},common.sexCheckbox=function(){var e=$(".J_sex");e.length&&e.children("span").on("click",function(){$(this).addClass("cur").siblings("span").removeClass("cur"),$(this).parent().find("input").val($(this).data("value"))})},common.timerCountDown=function(){var e=$(".J_countDown");if(e.length)for(var t=0,n=e.length;t<n;t++)(function(){return{obj:"",timeSecond:"7200",html:"{H}:{I}:{S}",checkTime:function(){var e=this;if(!(e.timeSecond<=0)){--e.timeSecond;var t=parseInt(e.timeSecond/60/60),n=parseInt(e.timeSecond/60%60),a=parseInt(e.timeSecond%60),i={h:t,i:n,s:a,H:t>=10?t:"0"+t,I:n>=10?n:"0"+n,S:a>=10?a:"0"+a},o=e.html;for(var r in i){var c=new RegExp("{"+r+"}","g");o=o.replace(c,i[r])}e.obj.html(o),setTimeout(function(){e.checkTime()},1e3)}},ready:function(e){this.obj=e;var t=parseInt(e.data("second")),n=e.data("html");t&&(this.timeSecond=t),n&&(this.html=n),this.checkTime()}}})().ready(e.eq(t))},common.resultBind=function(){var e=$("#orderBindPopup");e.length&&require(["ccwk-layerJS","css!ccwk-layerCSS"],function(){function t(e){return/^1\d{10}$/.test(e)}e.show(),$("body").css({position:"fixed"});var n=e.find("#bindText"),a=e.find("#phoneCode"),i=e.find("#bindAreacode");t(n.val())&&a.slideDown(),n.on("input propertychange",function(){t($(this).val())?a.slideDown():a.slideUp()}),i.find("select").on("change",function(){var e=$(this).find("option:selected").val();$(this).siblings("span").html("+"+e)}),a.children("span").on("click",function(){if(!t(n.val()))return void layer.msg("请输入正确的手机号",{icon:5});var e=$(this),a=$(this).data("action");if(!$(this).attr("disabled")){var i=30;e.attr("disabled",!0).html("30s后重获");var o=setInterval(function(){i--,i>0?e.html(i+"s后重获"):(clearInterval(o),e.removeAttr("disabled").html("获取验证码"))},1e3);$.ajax({url:a,data:{phone:n.val()},dataType:"json",success:function(t){if(t.code<=0)return layer.msg(t.msg,{icon:2}),clearInterval(o),e.removeAttr("disabled").html("获取验证码"),!1;layer.msg("验证码发送成功")}})}}),$(".J_resultSubmitBtn").on("click",function(){if(!t(n.val()))return void layer.msg("请输入正确的手机号",{icon:5});var e,a,i=!1,o=$(this),r=o.parents("form.J_ajaxForm"),c=o.data("action")?o.data("action"):r.attr("action"),l=r.attr("method")?r.attr("method"):"GET",s=r.find('input[name="privacy_protocol"]');if(s.length&&!s.is(":checked"))return layer.msg("您未同意个人隐私协议",{icon:5}),!1;if(i)return!1;i=!0;var d=function(e,t){var n=e.msg,i="";n.msg&&(n=e.msg.msg,i=e.msg.field),e.code>0?layer.msg(n,{icon:1,time:2e3},function(){r.serialize().indexOf("scene=qyapp_sync_login")>=0&&window.qyappMessage&&qyappMessage.post({event:"syncLogin",params:{ordersn:a.find(function(e){return"order_sn"==e.name}).value||"",mobile:a.find(function(e){return"value"==e.name}).value||"",captcha:a.find(function(e){return"code"==e.name}).value||""}}),e.url&&(window.location.href=e.url),r.find('input[name="value"]').val(""),r.find('input[type="code"]').val("")}):e.code<=0&&(layer.msg(n,{icon:2,time:1e3}),t.removeProp("disabled").removeClass("disabled"),""!=i&&$("#"+i).focus())};a=r.serializeArray(),$.ajax({url:c,type:l,data:r.serialize(),dataType:"json",beforeSend:function(){var t=o.text();o.text(t+"中...").prop("disabled",!0).addClass("disabled"),e=layer.load(0,{shade:!1})},success:function(t,n,r,c){if(t.code>0&&window.localStorage)for(var l=0,s=a.length;l<s;l++)try{localStorage.setItem(a[l].name,a[l].value)}catch(e){}var u=o.text();o.removeClass("disabled").text(u.replace("中...","")).parent().find("span").remove(),layer.close(e),d(t,o),setTimeout(function(){i=!1},2e3)}})});var o=e.find(".J_mainContent"),r=e.find(".J_twoConfirm");e.find(".J_bindCancel").on("click",function(){r.show(),o.hide()}),r.find(".J_twoConfirmCancel").on("click",function(){e.remove(),$("body").css({position:"static"})}),r.find(".J_twoConfirmBack").on("click",function(){r.hide(),o.show()})})},common.select=function(){var e=$(".J_select");if(e.length){var t=e.children("select");e.children("span").text(function(){return $(this).siblings("select").find("option:selected").text()}),t.on("change",function(){var e=$(this).find("option:selected").text();$(this).siblings("span").text(e),$(this).find("option:selected").val()?$(this).siblings("span").css("color","#333"):$(this).siblings("span").css("color","#999")})}},common.resultEvaluate=function(){if($(".J_evaluateBox").length){var e=["特别不满意","不太满意","一般","还算满意","非常满意"];$(".J_evaluateStar").on("click",function(){var t=$(this).data("star"),n=$(this).siblings(".J_starWords"),a=$(this).parents(".J_evaluateBox").find(".J_badEvaluate");$(this).addClass("full"),$(this).prevAll(".J_evaluateStar").addClass("full"),$(this).nextAll(".J_evaluateStar").removeClass("full"),$(this).siblings("input").val(t),n.text(e[t-1]),t<3?a.slideDown("fast"):a.slideUp("fast",function(){$(this).find("select").val("").trigger("change")})}),window.evaluateCallback=function(e,t){var n=e.msg;n.msg&&(n=e.msg.msg),e.code>0?layer.msg(n,{icon:1,time:2e3},function(){t.parents(".J_evaluateBox").slideUp("fast",function(){$(this).remove()})}):e.code<=0&&layer.msg(n,{time:1e3})}}},common.payStatus=function(){var e=$("#payStatus");if(e.length){var t=function(){$.ajax({type:"GET",url:e.data("pay-status"),success:function(n){n.code&&n.data.status?location.href=e.data("result-url"):setTimeout(function(){t()},2e3)},error:function(){}})};t();var n=localStorage.getItem("ccwk-order-history")||"{}";n=JSON.parse(n);var a=e.data("serversinfo"),i=e.data("orderinfo");"object"!=_typeof(n[a.identifier])&&(n[a.identifier]={});var o={};o[i.order_sn]={serversinfo:a,orderinfo:i},Object.assign(n[a.identifier],o),localStorage.setItem("ccwk-order-history",JSON.stringify(n))}},common.paypcQrcode=function(){var e=$(".J_payWepayQrcode"),t=$(".J_payAlipayQrcode"),n=$("#paypcQrcode");if(n.length){var a=n.find(".J_code"),i=n.find(".J_refash"),o=n.find(".J_wepay"),r=n.find(".J_alipay");require(["ccwk-qrcode","ccwk-layerJS","css!ccwk-layerCSS"],function(c){var l=!1,s=function(){var t=e.attr("href")+"&qr_code=1";l=layer.load(3,{shade:!1}),$.ajax({type:"GET",url:t,success:function(e){var t;if(layer.close(l),null!==(t=e.pay_info)&&void 0!==t&&t.pay_code_url){var d;a.html(""),new c(a[0],{text:null===(d=e.pay_info)||void 0===d?void 0:d.pay_code_url,width:120,height:120}),i.data("type","wepay"),o.show(),r.hide(),n.show(),setTimeout(s,72e5)}}})},d=function(){var e=location.origin+""+t.attr("href")+"&t="+Math.floor((new Date).getTime()/1e3);a.html(""),new c(a[0],{text:e,width:120,height:120}),i.data("type","alipay"),o.hide(),r.show(),n.show()};n.on("click",function(){n.hide()}),n.find(".J_wrap").on("click",function(e){e.stopPropagation()}),i.on("click",function(e){return e.preventDefault(),"wepay"==$(this).data("type")?s():d(),!1}),e.on("click",function(e){return e.preventDefault(),s(),!1}),t.on("click",function(e){return e.preventDefault(),d(),!1})})}},common.payh5UrlSchemes=function(){var e=$(".J_payWepayH5");e.length&&require(["ccwk-layerJS","css!ccwk-layerCSS"],function(){var t=0;e.on("click",function(n){n.preventDefault();var a=e.attr("href"),i=layer.load(3,{shade:!1});return $.ajax({type:"GET",url:a+"&isjson=1",success:function(e){if(layer.close(i),e.pay_info){var n=e.pay_info.weixin,o=e.pay_info.url,r=(new Date).getTime();n&&r-t>5e3?(t=(new Date).getTime(),top.location.href=n):top.location.href=o}else top.location.href=a}}),!1})})},common.resultEditInfo=function(){var e=$("#orderEditPopup");e.length&&require(["ccwk-layerJS","css!ccwk-layerCSS"],function(t){e.on("click",function(){e.hide()}),e.find(".J_close").on("click",function(){e.hide()}),e.find(".J_wrap").on("click",function(e){e.stopPropagation()}),$(".J_resultEditShow").on("click",function(){e.show()})})},common.hot=function(){$(".J_hotSwiper").length&&require(["ccwk-swiperJS","css!ccwk-swiperCSS","ccwk-layerJS","css!ccwk-layerCSS"],function(e){var t=!1;t=layer.load(1,{shade:!1}),setTimeout(function(){layer.close(t);new e(".J_hotSwiper",{slidesPerView:4,slidesPerColumn:2,slidesPerGroup:4,observer:!0,observeParents:!0,autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{el:".popular-pages",clickable:!0}});$(".J_hotSwiper").css("opacity",1)},300)})},common.customer=function(){$(".J_customerSwiper").length&&require(["ccwk-swiperJS","css!ccwk-swiperCSS"],function(e){new e(".J_customerSwiper",{direction:"vertical",autoplay:!0,loop:!0})})},common.comment=function(){function e(){var e=parseInt(n.children("li").eq(0).outerHeight());Math.abs(t)==Math.abs(e)?(n.children("li").eq(0).appendTo(n),n.css("top",t=0)):n.css("top",--t)}if($("#publicFeedbackScroll").length){var t=0,n=$("#publicFeedbackScroll").children("ul");setInterval(e,50);var a=$("#publicShowFeedbackForm"),i=$("#publicFeedbackForm"),o=$("#publicFeedbackSubmit"),r=$("#publicFeedbackText");a.length>0&&a.on("click",function(){i.show(),$(this).hide()});var c=0;o.length>0&&o.on("click",function(){require(["ccwk-layerJS","css!ccwk-layerCSS"],function(){var e=r.val();c?layer.msg("您已经提交过反馈，短时间不能再提交了哦！",{icon:5}):e?(c=1,r.val(""),layer.msg("提交成功，谢谢您的反馈！",{icon:1,time:3e3})):layer.msg("请输入留言内容！",{icon:5})})})}},common.copyOrdersn=function(){$(".J_copyOrdersn").length&&require(["ccwk-clipboard","ccwk-layerJS","css!ccwk-layerCSS"],function(e){var t=new e(".J_copyOrdersn");t.on("success",function(e){layer.msg("复制成功"),e.clearSelection()}),t.on("error",function(e){layer.msg("请长按复制")})})},common.resultPackageTabnav=function(){var e=$("#packageTabnav");if(!e.length)return!1;var t=e.find(".active"),n=$(window).width(),a=t.length?t.offset().left:0;console.log(a),t&&a>n/2&&e.animate({scrollLeft:a-n/2},500),$(window).scroll(function(){$(this).scrollTop()>=e.parent().offset().top?e.addClass("fixed"):e.removeClass("fixed")})},common.resultTopBindPhone=function(){var e=$("#publicTopBindPopup");e.length&&require(["ccwk-layerJS","css!ccwk-layerCSS"],function(){function t(e){return/^1[3456789]{1}\d{9}$/.test(e)}var n=e.find("#publicTopBindText"),a=e.find("#publicTopPhoneCode");t(n.val())&&a.slideDown(),n.on("input propertychange",function(){t($(this).val())?a.slideDown():a.slideUp()}),a.children("span").on("click",function(){if(!t(n.val()))return void layer.msg("请输入正确的手机号");var e=$(this),a=$(this).data("action");if(!$(this).attr("disabled")){var i=30;e.attr("disabled",!0).html("30s后重获");var o=setInterval(function(){i--,i>0?e.html(i+"s后重获"):(clearInterval(o),e.removeAttr("disabled").html("获取验证码"))},1e3);$.ajax({url:a,data:{phone:n.val()},dataType:"json",success:function(t){if(t.code<=0)return layer.msg(t.msg),clearInterval(o),e.removeAttr("disabled").html("获取验证码"),!1;layer.msg("验证码发送成功")}})}}),$(".J_publicTopPhoneBtn").on("click",function(){if(!t(n.val()))return void layer.msg("请输入正确的手机号");var e,a,i=!1,o=$(this),r=o.parents("form.J_ajaxForm"),c=o.data("action")?o.data("action"):r.attr("action"),l=r.attr("method")?r.attr("method"):"GET",s=r.find('input[name="privacy_protocol"]');if(s.length&&!s.is(":checked"))return layer.msg("您未同意个人隐私协议"),!1;if(i)return!1;i=!0;var d=function(e,t){var n=e.msg,i="";n.msg&&(n=e.msg.msg,i=e.msg.field),e.code>0?layer.msg(n,{icon:1,time:2e3},function(){r.serialize().indexOf("scene=qyapp_sync_login")>=0&&window.qyappMessage&&qyappMessage.post({event:"syncLogin",params:{ordersn:a.find(function(e){return"order_sn"==e.name}).value||"",mobile:a.find(function(e){return"value"==e.name}).value||"",captcha:a.find(function(e){return"code"==e.name}).value||""}}),e.url&&(window.location.href=e.url),r.find('input[name="value"]').val(""),r.find('input[type="code"]').val("")}):e.code<=0&&(layer.msg(n,{time:1e3}),t.removeProp("disabled").removeClass("disabled"),""!=i&&$("#"+i).focus())};a=r.serializeArray(),$.ajax({url:c,type:l,data:r.serialize(),dataType:"json",beforeSend:function(){var t=o.text();o.text(t+"中...").prop("disabled",!0).addClass("disabled"),e=layer.load(0,{shade:!1})},success:function(t,n,r,c){if(t.code>0&&window.localStorage)for(var l=0,s=a.length;l<s;l++)try{localStorage.setItem(a[l].name,a[l].value)}catch(e){}var u=o.text();o.removeClass("disabled").text(u.replace("中...","")).parent().find("span").remove(),layer.close(e),d(t,o),setTimeout(function(){i=!1},2e3)}})})})},common.indexFixed=function(){var e=$(".J_testFixedShow");if(e.length){e=e.offset().top;var t=$(".J_testFixedTop").length>0?$(".J_testFixedTop").offset().top-20:200,n=$("#testFixedBtn");$(window).scroll(function(){var t=$(".J_testFixedBottom").length>0?$(".J_testFixedBottom").offset().top-$(window).height():$("body").height(),a=$(window).scrollTop();if(a>e&&a<t){n.fadeIn();var i=n.outerHeight();$(".footer-base").css("padding-bottom",i+5+"px"),$(".wnl_history_btn").length&&$(".wnl_history_btn").css("bottom",i+10+"px")}else n.fadeOut(),$(".footer-base").css("padding-bottom","20px"),$(".wnl_history_btn").length&&$(".wnl_history_btn").css("bottom","10px")}),n.add(".J_testScrollTop").on("click",function(){$("html,body").animate({scrollTop:t},300)})}},common.payPagePopup=function(){var e=$("#publicPayPopup"),t=$("#publicPPClose"),n=$(".J_payPopupShow").length>0?$(".J_payPopupShow"):"";$("#publicPayBottom").each(function(){var a=$(this);$(window).scroll(function(){var e=$(".J_payBottomShow").length>0?$(".J_payBottomShow").offset().top:200;$(window).scrollTop()>e?a.fadeIn():a.fadeOut()}),a.on("click",function(){e.show()}),t.on("click",function(){e.hide()}),n&&n.on("click",function(){e.show()})}),$("#publicGuidePayBottom").each(function(){var a=$(this);$(window).scroll(function(){var e=$(".J_payBottomShow").length>0?$(".J_payBottomShow").offset().top:200;$(window).scrollTop()>e?a.fadeIn():a.fadeOut()}),a.find(".J_publicGuideFixedBtn").on("click",function(){e.show()}),t.on("click",function(){e.hide()}),n&&n.on("click",function(){e.show()})})},common.orderHistory=function(){var e=$(".J_orderHistoryEntry");e.length&&(window.addEventListener("pageshow",function(){var t=e.data("app"),n=e.data("banner"),a=JSON.parse(localStorage.getItem("ccwk-order-history"));a&&a[t]&&(n&&"[banner]"!=n&&(a[t+"banner"]=n,localStorage.setItem("ccwk-order-history",JSON.stringify(a))),e.show())},!1),e.find(".J_entryClose").on("click",function(){$(this).parents(".J_orderHistoryEntry").slideUp("fast")}))},common.weixinFontsize=function(){function e(){WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0}),WeixinJSBridge.on("menu:setfont",function(){WeixinJSBridge.invoke("setFontSizeCallback",{fontSize:0})})}"object"==("undefined"==typeof WeixinJSBridge?"undefined":_typeof(WeixinJSBridge))&&"function"==typeof WeixinJSBridge.invoke?e():document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e,!1):document.attachEvent&&document.attachEvent("onWeixinJSBridgeReady",e)},common.guide=function(){var e=$(".J_publicGuidePayment"),t=e.find(".J_publicGuidePaymentWay"),n=$(".J_publicGuidePayBtn");if(t.find(".pay_wx").text("微信支付"),t.find(".pay_zfb").text("支付宝支付"),t.find(".J_item").first().addClass("active"),n.length){var a=function(){return/baiduboxapp/i.test(window.navigator.userAgent.toLowerCase())},i=t.find(".pay_wx").data("url"),o=t.find(".pay_zfb").data("url"),r=i;t.find(".J_item").each(function(){var e=$(this);e.on("click",function(){e.addClass("active").siblings(".J_item").removeClass("active"),r=e.hasClass("pay_wx")?i:o})}),n.each(function(){$(this).on("click",function(){a()?window.open(r):window.location.href=r})});var c=$(".J_publicShowGuideBtn");c.length&&$(".J_publicGuideBottomFixed").each(function(){var e=$(this);$(window).on("scroll",function(){var t=c.length>0?c.offset().top:200;$(window).scrollTop()>t?e.show():e.hide()})})}},common.addressList=function(){if($(".J_publicChoseAddr").length){var e=$("#publicProvince"),t=$("#publicCity"),n=$("#publicArea"),a=$("#publicAddrSelect"),i=$(".J_publicChoseAddr");require(["ccwk-areaJS"],function(){function o(e){for(var t="",n=0,a=e.length;n<a;n++)t+='<option data-id="'+e[n].id+'">'+e[n].name+"</option>";return t}var r=[],c=[],l=[],s=new areaDataMapping;r=Object.values(s),c=Object.values(r[0].child),l=Object.values(c[0].child),e.html(o(r)),t.html(o(c)),n.html(o(l)),e.on("change",function(){var e=$(this).find("option:selected").data("id"),a=r.find(function(t){return t.id==e});a&&Object.values(a.child).length?c=Object.values(a.child):(c=[],l=[],n.html("")),t.html(o(c)),c.length&&n.html(o(Object.values(c[0].child)))}),t.on("change",function(){var e=$(this).find("option:selected").data("id"),t=c.find(function(t){return t.id==e});t&&(l=Object.values(t.child)),n.html(o(l))});var d=0;$(".J_publicChoseAddr").each(function(){$(this).on("click",function(){a.show(),i=$(this),d=$(document).scrollTop(),$("body").css({position:"fixed",top:-d})})}),$("#publicAddrBtn").on("click",function(){var o=i,r=e.find("option:selected").val(),c=t.find("option:selected").val(),l=n.find("option:selected").val();n.length?o.val("".concat(r,"-").concat(c,"-").concat(l)):o.val("".concat(r,"-").concat(c)),o.siblings(".J_province").length&&(o.siblings(".J_province").val(r),o.siblings(".J_city").val(c),o.siblings(".J_area").val(l));var s=$(".J_areaValId");if(s.length){var u=e.find("option:selected").data("id"),f=n.find("option:selected").data("id");f?s.val(f):s.val(u)}$(".J_publicQmCity").length&&("市辖区"==c||"县"==c||void 0===c?o.val("".concat(r)):o.val("".concat(c))),a.hide(),$("body").css({position:"static"}),$(document).scrollTop(d)})})}},common.urlHandle=function(){var e=$("#commonHeader"),t=$(".J_protocolShowBtn"),n=$('input[name="privacy_protocol"]'),a=$(".J_formCheckbox");1==getQueryString("hide_header")&&e.length&&e.hide(),1==getQueryString("hide_protocol")&&t.length&&t.parent().hide(),1==getQueryString("uncheck")&&n.length&&n.prop("checked",!1),1==getQueryString("uncheck")&&a.length&&a.removeClass("active").find('input[name="privacy_protocol"]').prop("checked",!1)},common.resultBottomQrcode=function(){var e=$("#resultBottomfix");if(e.length){var t=e.find(".J_qrcodeWrap");t.on("click",function(e){var n=$(e.target);n.parents(".J_qrcode").length>0||n.is(".J_qrcode")||t.hide()}),e.find(".J_service").on("click",function(){t.show()})}},window.qyappMessage={get:function(e){console.log("get",e)},post:function(e){var t=JSON.stringify(e),n=document.title;document.title=t,setTimeout(function(){document.title=n},100)}};for(var key in common)"function"==typeof common[key]&&common[key]()});